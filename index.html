<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panchangam ‚Äì JSON</title>

<style>
body{
font-family:system-ui;
padding:16px;
background:#f4f6fb;
}

h2{text-align:center}

input,button{
width:100%;
padding:12px;
margin:8px 0;
font-size:16px;
}

button{
background:#243c8f;
color:white;
border:none;
}

#info{
margin:10px 0;
font-weight:600;
text-align:center;
}

table{
width:100%;
border-collapse:collapse;
margin-top:10px;
font-size:14px;
}

th,td{
border:1px solid #ccc;
padding:8px;
text-align:center;
}

th{
background:#243c8f;
color:white;
}
</style>

</head>
<body>

<h2>ü™ê Panchangam ‚Äì Transit</h2>

<div class="controls">
  <input type="date" id="dateInput">
  <button onclick="loadData()">Show</button>
</div>


<div id="info"></div>

<table>
<thead>
<tr>
<th>Planet</th>
<th>D.M.S</th>
<th>Sign</th>
<th>Star</th>
<th>Sub</th>
<th>S.Time</th>
</tr>
</thead>
<tbody id="tbody">
<tr><td colspan="6">Select a date</td></tr>
</tbody>
</table>

<script>
async function loadData(){

  const input = document.getElementById("dateInput").value;
  if(!input){
    alert("Select date");
    return;
  }

  // YYYY-MM-DD ‚Üí DD-MM-YYYY
  const [y,m,d] = input.split("-");
  const selectedDate = `${d}-${m}-${y}`;

  const res = await fetch("panchangam_2026.json");
  const data = await res.json();

  const tbody = document.getElementById("tbody");
  const info = document.getElementById("info");
  tbody.innerHTML = "";
  info.innerHTML = "";

  const rows = data.filter(r => r.Date === selectedDate);

  if(rows.length === 0){
    tbody.innerHTML =
      `<tr><td colspan="6">No data for ${selectedDate}</td></tr>`;
    return;
  }

  // show Day + Ayanamsam once
  info.innerText =
    `üìÖ ${rows[0].Day} | üïâÔ∏è Ayanamsam: ${rows[0].Ayanamsam}`;

  rows.forEach(r=>{
    tbody.innerHTML += `
      <tr>
        <td>${r.Planet}</td>
        <td>${r["D.M.S"]}</td>
        <td>${r.Sign}</td>
        <td>${r.Star}</td>
        <td>${r.Sub}</td>
        <td>${r["S.Time"] || ""}</td>
      </tr>`;
  });
}
</script>

</body>
</html>
